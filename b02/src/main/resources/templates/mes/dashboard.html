<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Simple Sidebar - Start Bootstrap Template</title>
    <link rel="icon" type="image/x-icon" th:href="@{/assets/favicon.ico}" />
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
</head>
<body>
<div class="d-flex" id="wrapper">
    <!-- Sidebar-->
    <div class="border-end bg-white" id="sidebar-wrapper">
        <div class="sidebar-heading border-bottom bg-light"><a href="/mes/dashboard">MES</a></div>
        <div class="list-group list-group-flush">
            <a class="list-group-item list-group-item-action list-group-item-light p-3" href="/mes/inbound/list">입고관리</a>
            <a class="list-group-item list-group-item-action list-group-item-light p-3" href="/mes/outbound/list">출고관리</a>
            <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!">재고관리</a>
            <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!">제품관리</a>
        </div>
    </div>

    <div id="page-content-wrapper">
        <!-- Top navigation-->
        <nav class="navbar navbar-dark bg-dark">
            <div class="container-fluid">
                <a class="navbar-brand" id="sidebarToggle">메뉴</a>
                <a class="navbar-brand" href="#">거래처</a>
                <a class="navbar-brand" href="/mes/adminpage">관리자</a>
                <!-- 로그인된 사용자가 있으면 이름 표시 -->
                <span th:if="${admin != null}" class="navbar-text" th:text="'반갑습니다, ' + ${admin.adminName} + '님!'"></span>
                <!-- 로그아웃 버튼 -->
                <form class="d-flex" action="/mes/logout">
                    <button class="btn btn-sm btn-outline-secondary" type="submit">로그아웃</button>
                </form>
            </div>
        </nav>

        <!-- 페이지 내용-->
        <div class="container-fluid">
            <!-- 세션 확인 및 로그인 상태 체크 -->
            <script th:inline="javascript">
                /*<![CDATA[*/
                if (![[${session.adminId}]]) {
                    window.location.href = "/mes/login"; // 세션에 admin이 없으면 로그인 페이지로 리다이렉트
                }
                /*]]>*/
            </script>

            <div class="container">
                <div class="row row-cols-2">
                    <div class="col">
                        <button id="generateLottoBtn" class="btn btn-primary">로또 번호 추첨</button>
                        <div id="lottoResults"></div>
                    </div>
                    <div class="col">
                        <button id="generateFortuneBtn" class="btn btn-secondary">오늘의 운세</button>
                        <div id="fortuneResult" class="mt-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/scripts.js}"></script>

<script th:inline="javascript">
    // 로또 번호 추첨 함수
    function generateLottoNumbers() {
        const lottoNumbers = [];
        while (lottoNumbers.length < 6) {
            let number = Math.floor(Math.random() * 45) + 1;
            if (!lottoNumbers.includes(number)) {
                lottoNumbers.push(number);
            }
        }
        lottoNumbers.sort((a, b) => a - b); // 번호를 오름차순으로 정렬
        return lottoNumbers;
    }

    // 5게임의 로또 번호를 생성하여 HTML에 표시
    function generateMultipleLottoGames() {
        let resultsHTML = '';
        for (let i = 0; i < 5; i++) {
            const lottoNumbers = generateLottoNumbers();
            resultsHTML += `
                <div class="lotto-card">
                    <div>
                        <div class="lotto-header">게임 ${i + 1}</div>
                        <div class="lotto-numbers">
                            ${lottoNumbers.map(num => `<span>${num}</span>`).join(' ')}
                        </div>
                    </div>
                    <!-- 손가락 이미지 추가 -->
                    <img src="/image/lottofinger.jpg" class="finger" />
                </div>
            `;
        }
        return resultsHTML;
    }

    // 오늘의 운세 배열
    const fortunes = [
        '로또 추첨으로 로또 사는건 어때요?',
        '오늘은 로또 추첨 쉬어가요',
        '오늘은 운이 매우 좋은 날일 것 같네요!',
        // ... (다른 운세들)
    ];

    // 운세 랜덤으로 선택하는 함수
    function getRandomFortune() {
        const randomIndex = Math.floor(Math.random() * fortunes.length);
        return fortunes[randomIndex];
    }

    // 버튼 클릭 시 로또 번호 생성 및 결과 표시
    document.getElementById('generateLottoBtn').addEventListener('click', function() {
        const lottoResultsDiv = document.getElementById('lottoResults');
        lottoResultsDiv.innerHTML = generateMultipleLottoGames();
    });

    // 오늘의 운세 버튼 클릭 시 운세 표시
    document.getElementById('generateFortuneBtn').addEventListener('click', function() {
        const fortuneResultDiv = document.getElementById('fortuneResult');
        fortuneResultDiv.innerHTML = `<h5>오늘의 운세: ${getRandomFortune()}</h5>`;
    });
</script>
</body>
</html>
